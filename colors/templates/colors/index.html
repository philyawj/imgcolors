{% extends 'base.html' %} {% block content %}

<h1>HOME</h1>

{% if error %}
<div class="alert alert-danger" role="alert">
  {{ error }}
</div>
{% endif %}

<form
  id="image-form"
  method="POST"
  action="{% url 'index' %}"
  enctype="multipart/form-data"
>
  {% csrf_token %}
  <div class="form-group">
    <label for="imageInput">Image:</label>
    <div class="custom-file">
      <input
        type="file"
        class="custom-file-input"
        name="image"
        id="imageInput"
        aria-describedby="inputGroupFileAddon01"
      />
      <label class="custom-file-label" for="imageInput">Choose file</label>
    </div>
  </div>
  <div class="form-group">
    <label for="numberOfColors">Number of Colors:</label>
    <select class="form-control" id="numberOfColors" name="numberOfColors">
      <option value="3">3</option>
      <option value="4">4</option>
      <option selected value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
    </select>
  </div>
  <input id="submit-btn" class="btn btn-dark" type="submit" value="Submit" />
</form>

{% if just_saved_image %}
<p>image id: {{ just_saved_image.id }}</p>
<p>image name: {{ just_saved_image.filename }}</p>
<p>image created_at: {{ just_saved_image.created_at }}</p>
<p>number of colors: {{ number_of_colors }}</p>
<div class="container">
  <div class="row">
    <div class="col-4">
      <h2>original image:</h2>
      <img
        class="img-fluid"
        width="400"
        src="{{ just_saved_image.image.url }}"
        alt=""
      />
    </div>
    <div class="col-4">
      <h2>color output:</h2>
      <img class="img-fluid" width="400" src="{{ just_saved_output }}" alt="" />
    </div>
    <div class="col-4">
      <h2>hexes:</h2>
      {% for hex in hexes_sorted_list %}
      <div
        style="background-color: {{ hex }}; height: 40px; width: 40px;"
        class="rounded-circle"
      ></div>
      <p>{{ hex }}</p>
      {% endfor %}
    </div>
  </div>
</div>

{% else %}
<p>no image set</p>
{% endif %} {% endblock %}
